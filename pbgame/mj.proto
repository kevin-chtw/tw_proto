syntax = "proto3";

package pbmj;
option go_package = "/pbmj";

message MJRequestReq {
  int32 seat = 1; //座位号
  int32 request_type = 2; // 动作类型
  int32 requestid = 3; // 请求ID
  int32 tile = 4; // 牌 （吃为吃牌的最左牌id）
}

message MJTrustReq {
  int32 seat = 1; //座位号
  bool trust = 2; // 是否托管
}

message MJAnimationReq {
  int32 seat = 1; //座位号
  int32 requestid = 2; // 请求ID
}

message MJSwapTilesReq { // 换三张
  int32 requestid = 1; // 请求ID
  repeated int32 tiles = 2; //换出的牌
}

message MJDingQueReq { // 定缺
  int32 requestid = 1; // 请求ID
  int32 color = 2; //花色
}

message MJGameStartAck {
  int32 banker = 1; //庄家
  int32 tile_count = 2; //牌库总张数
  repeated int64 scores = 3;//带入分
  string property = 4; //配置串
}

message MJOpenDoorAck {
  int32 seat = 1; //座位号
  repeated int32 tiles = 2; // 手牌列表
}

message MJRequestAck {
  int32 seat = 1; // //座位号
  int32 request_type = 2; // 动作类型
  int32 requestid = 3; // 请求ID
  int64 hu_multi = 4; // 胡牌倍数
  map<int32,CallDatas> tings = 5; //吃听,碰听时用到，吃听最左的点数集合, 碰听为碰的牌
}

message CallDatas {
  map<int32,CallData> call_data = 5; // 打出的牌-听牌列表
}

message MJChowAck {
  int32 seat = 1; //座位号
  int32 from = 2;//出牌座位号
  int32 tile = 3; //吃的牌
  int32 left_tile = 4; //最左的牌
  map<int32,CallData> call_data = 5; // 打出的牌-听牌列表
  bool ting = 6; // 是否吃听
}

message MJPonAck {
  int32 seat = 1; //座位号
  int32 from = 2;//出牌座位号
  int32 tile = 3; //碰的牌列表
  map<int32,CallData> call_data = 4; // 打出的牌-听牌列表
  bool ting = 5; // 是否碰听
}

message MJKonAck {
  int32 seat = 1; //座位号
  int32 from = 2;//出牌座位号
  int32 tile = 3; //碰的牌列表
  int32 kon_type = 4; //杠牌的类型(0:明杠 1： 暗杠 2：补杠)
}

message MJHuAck {
  int32 pao_seat = 1; //点炮玩家
  int32 tile = 2; //胡的牌
  repeated MJHuData hu_data = 3; // 胡的类型
}

message MJHuData {
  int32 seat = 1; //座位号
  int32 gen = 2; //根数
  int64 multi = 3; //倍数
  repeated int32 hu_types = 4; // 胡的类型
}

message MJDrawAck {
  int32 seat = 1;//座位号
  int32 tile = 2; //胡的牌
  int32 draw_type = 3; //0-空，1-普通，2-杠后
  map<int32,CallData> call_data = 4; // 打出的牌-听牌列表
}

message MJDiscardAck {
  int32 seat = 1; //座位号
  int32 tile = 2; // 丢弃的牌
}

message MJTingAck {
  int32 seat = 1; //座位号
  int32 tile = 2; //丢弃的牌
  bool tian_ting = 3; //是否天听
}

message MJScoreChangeAck {
  int32 score_reason = 1; //得分原因
  repeated int64 scores = 2; //得分列表
  int32 tile = 3; // 胡的牌或杠的牌
  int32 pao_seat = 4; // 点炮玩家
  repeated MJHuData hu_data = 5; // 胡的类型
}

message MJTrustAck {
  int32 seat = 1; // 玩家ID
  bool trust = 2; // 是否托管
}

message MJAnimationAck {
  int32 requestid = 1; 
}   

message MJResultAck {
  bool liuju = 1; // 流局标记
  repeated MJPlayerResult player_results = 2; // 玩家结果列表
}

message MJPlayerResult {
  int32 seat = 1; // 玩家ID
  int64 cur_score = 2; // 当前分数
  int64 win_score = 3; // 总得分
  repeated int32 tiles = 4; // 玩家手牌
}

message MJCallDataAck {
  int32 seat = 1; //座位号
  map<int32,CallData> call_data = 2; // 打出的牌-听牌列表
}

message MJTipAck {
  int32 seat = 1;
  int32 tip = 2; //提示
}

message CallData { 
  map<int32, CallInfo> call_tiles = 2; // 听牌列表(牌-番数或倍数)
}

message CallInfo {
  int64 multi = 1; //倍数
  repeated int32 hu_types = 2; //胡牌类型
}

message MJSwapTilesAck { // 换三张
  int32 requestid = 1;
}

message MJSwapFinishAck {
  int32 seat = 1;
  repeated int32 tiles = 2;
}

message MJSwapTilesResultAck { // 换三张
  int32 swap_type = 1; //0-逆时针，1-顺时针，2-交叉
  repeated MJSwapTiles swap_tiles = 2;
}

message MJSwapTiles {
  int32 from = 1;
  int32 to = 2;
  repeated int32 tiles = 3;
}

message MJDingQueAck {
  int32 requestid = 1; // 请求ID
}

message MJDingQueFinishAck {
  int32 seat = 1;
  int32 color = 2;
}

message MJDingQueResultAck {
  repeated int32 colors = 1;
}

message MJRcmdFanAck { //推荐番型
  repeated int32 fans = 1; 
}