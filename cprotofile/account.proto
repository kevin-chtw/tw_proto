syntax = "proto3";

import "google/protobuf/any.proto";

package cproto;
option go_package = "../cproto";

message AccountReq {
  google.protobuf.Any req = 1;
}

message AccountAck {
  google.protobuf.Any ack = 1;
}

message WxLoginReq {
  string code = 1; //微信码
  string invite_code = 2; //邀请码
}

message WxLoginAck {
  string session_key = 1;
  PlayerInfoAck player_info = 2;
}

message UpdateAccountReq {
  string nickname = 1;
  string avatar = 2;
}

message LoginReq {
  string account = 1;
  string password = 2;
}

message RegisterReq {
  string account = 1; 
  string password = 2;
  string avatar = 3; //随机生成的头像内容
  string invite_code = 4; //邀请码
}

message BindInviteCodeReq {
  string invite_code = 1;
}

message ShopReq{
  int32 shop_type = 1; // 商店类型 0:金币商店 1:元宝商店
}

message BackpackReq {  
}

message BackpackAck {
  map<int32, int64> items = 1; //玩家物品
}

message ShopAck{
  int32 shop_type = 1;
  string shop_info = 2; // 商店数据，json格式
}

message PurchaseReq {
  int32 shop_type = 1;
  int32 id = 2;  //商品id
  bool to_coin = 3; //自动兑换成金币
}

message PurchaseAck {
  int32 shop_type = 1;
  map<int32, int64> goods = 2; // 商品id和数量
} 

message RegisterAck {  
  PlayerInfoAck player_info = 1; // 新注册玩家的信息
  map<int32,int64> award = 2; // 新注册玩家的奖励
}

message PlayerInfoAck {
  string uid = 1; // 玩家ID
  string nickname = 2; // 玩家昵称
  string avatar = 3; // 玩家头像
  map<int32, int64> items = 4; //玩家物品
}

message ItemsAck {
  map<int32, int64> items = 1; //玩家物品
}

// 会员相关协议
message MemberInfoReq {
  // 空请求，获取当前会员信息
}

message MemberInfoAck {
  int32 type = 1; // 会员类型：0-无会员，1-月卡，2-季卡，3-年卡
  int64 expire_time = 2; // 过期时间（时间戳，0表示无会员）
  repeated MemberTypeInfo types = 3; // 所有会员类型信息（包含价格、奖励等）
}

message MemberTypeInfo {
  int32 type = 1; // 会员类型：1-月卡，2-季卡，3-年卡
  int32 price = 2; // 开通价格（元）
  map<int32, int64> purchase_bonus = 3; // 立即奖励
  map<int32, int64> daily_reward = 4; // 每日奖励
}

message BuyMemberReq {
  int32 type = 1; // 会员类型：1-月卡，2-季卡，3-年卡
}

message BuyMemberAck {
  int32 type = 1; // 会员类型
  int64 expire_time = 2; // 过期时间（时间戳）
  map<int32, int64> bonus = 3; // 购买时获得的奖励
}

message ExchangeReq {
  int32 fromid = 1; // 原物品id
  int32 toid = 2; // 新物品id
  int64 count = 3; // 原物品数量
}

message ExchangeAck {
  map<int32, int64> items = 1; // 新物品id和数量
}